<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Detailed Weapons Cowboy</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;background:#000;touch-action:none}
#ui{position:fixed;inset:0;color:white;font-family:sans-serif;pointer-events:none}
#cross{position:absolute;left:50%;top:50%;width:22px;height:22px;margin:-11px}
#cross:before,#cross:after{content:"";position:absolute;background:white}
#cross:before{width:22px;height:2px;top:10px}
#cross:after{width:2px;height:22px;left:10px}
#hp{position:absolute;top:10px;left:10px;width:120px;height:14px;border:2px solid white}
#hpIn{height:100%;background:red}
#money{position:absolute;top:10px;right:10px}
#bar{position:absolute;bottom:0;left:0;right:0;height:64px;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:space-between;padding:0 10px;pointer-events:auto}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui">
  <div id="cross"></div>
  <div id="hp"><div id="hpIn"></div></div>
  <div id="money">$0</div>
  <div id="bar"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* ========== THREE 기본 ========== */
const renderer=new THREE.WebGLRenderer({canvas:c,antialias:true});
renderer.setSize(innerWidth,innerHeight);
const scene=new THREE.Scene();
scene.background=new THREE.Color(0x87ceeb);
const cam=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,.1,1000);
scene.add(new THREE.AmbientLight(0xffffff,.6));
const dl=new THREE.DirectionalLight(0xffffff,1);
dl.position.set(5,10,5);scene.add(dl);
const ground=new THREE.Mesh(new THREE.PlaneGeometry(500,500),new THREE.MeshStandardMaterial({color:0x228B22}));
ground.rotation.x=-Math.PI/2;scene.add(ground);

/* ========== 플레이어 팔 + 총 모델 ========== */
const player=new THREE.Group();scene.add(player);
const armR=new THREE.Mesh(new THREE.BoxGeometry(1,2,1),new THREE.MeshStandardMaterial({color:0xffd800}));
armR.position.set(1.5,3,0);player.add(armR);

let guns={};
function makeGun(name,color,w,h,d){ 
  const g=new THREE.Mesh(new THREE.BoxGeometry(w,h,d),new THREE.MeshStandardMaterial({color})); 
  g.name=name;
  g.position.set(.7,-.4,0);
  return g;
}
guns.revolver=makeGun("Revolver",0x333333,1.2,.4,.3);
guns.glock=makeGun("Glock",0x111111,1.1,.3,.4);
guns.m16=makeGun("M16",0x222222,2,0.3,0.5);
guns.bb=makeGun("BB",0xaaaaaa,.8,.2,.2);
guns.shotgun=makeGun("Shotgun",0x555555,1.8,.3,.4);
guns.kar98=makeGun("Kar98",0x770000,2,.3,.3);

/* 초기 장착 */
let currentGun=guns.revolver;
armR.add(currentGun);

/* ========== 총 변경 ========== */
function equipGun(name){
  if(currentGun)armR.remove(currentGun);
  currentGun=guns[name];
  armR.add(currentGun);
}

/* ========== 발사 & 반동 ========== */
function shoot(){
  if(!currentGun) return;
  // 반동 예시
  armR.rotation.x-=0.1;
}

/* ========== 루프 ========== */
function loop(){
  requestAnimationFrame(loop);
  // 단순 팔 흔들기 예시
  armR.rotation.x*=0.9;
  cam.position.lerp(player.position.clone().add(new THREE.Vector3(0,6,10)),.1);
  cam.lookAt(player.position);
  renderer.render(scene,cam);
}
loop();
</script>
</body>
</html>